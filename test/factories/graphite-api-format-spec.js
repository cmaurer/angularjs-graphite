describe('Graphite Format Factory ', function(){

  var rawDataSingleLine = 'pr.all.pdc.server01.prpm,1391720430,1391724030,30|16.0,10.0,12.0,8.0,4.0,6.0,10.0,4.0,14.0,10.0,2.0,4.0,8.0,2.0,8.0,6.0,8.0,2.0,4.0,6.0,0.0,8.0,2.0,6.0,4.0,8.0,4.0,4.0,6.0,2.0,8.0,6.0,8.0,0.0,10.0,8.0,10.0,2.0,4.0,8.0,8.0,10.0,4.0,12.0,10.0,2.0,10.0,2.0,6.0,12.0,6.0,6.0,6.0,8.0,10.0,6.0,10.0,8.0,10.0,4.0,6.0,8.0,4.0,8.0,6.0,10.0,12.0,12.0,6.0,8.0,6.0,8.0,8.0,4.0,12.0,6.0,4.0,4.0,2.0,4.0,6.0,6.0,2.0,6.0,10.0,4.0,10.0,6.0,6.0,6.0,8.0,2.0,8.0,6.0,8.0,4.0,8.0,10.0,10.0,10.0,4.0,14.0,10.0,4.0,4.0,0.0,6.0,10.0,4.0,6.0,12.0,8.0,6.0,6.0,16.0,2.0,0.0,4.0,8.0,0.0',
      singleLineDatapoints = [16.0,10.0,12.0,8.0,4.0,6.0,10.0,4.0,14.0,10.0,2.0,4.0,8.0,2.0,8.0,6.0,8.0,2.0,4.0,6.0,0.0,8.0,2.0,6.0,4.0,8.0,4.0,4.0,6.0,2.0,8.0,6.0,8.0,0.0,10.0,8.0,10.0,2.0,4.0,8.0,8.0,10.0,4.0,12.0,10.0,2.0,10.0,2.0,6.0,12.0,6.0,6.0,6.0,8.0,10.0,6.0,10.0,8.0,10.0,4.0,6.0,8.0,4.0,8.0,6.0,10.0,12.0,12.0,6.0,8.0,6.0,8.0,8.0,4.0,12.0,6.0,4.0,4.0,2.0,4.0,6.0,6.0,2.0,6.0,10.0,4.0,10.0,6.0,6.0,6.0,8.0,2.0,8.0,6.0,8.0,4.0,8.0,10.0,10.0,10.0,4.0,14.0,10.0,4.0,4.0,0.0,6.0,10.0,4.0,6.0,12.0,8.0,6.0,6.0,16.0,2.0,0.0,4.0,8.0,0.0],
      rawDataMultipleLine = 'pr.all.pdc.server01.prpm,1391720430,1391724030,30|16.0,10.0,12.0,8.0,4.0,6.0,10.0,4.0,14.0,10.0,2.0,4.0,8.0,2.0,8.0,6.0,8.0,2.0,4.0,6.0,0.0,8.0,2.0,6.0,4.0,8.0,4.0,4.0,6.0,2.0,8.0,6.0,8.0,0.0,10.0,8.0,10.0,2.0,4.0,8.0,8.0,10.0,4.0,12.0,10.0,2.0,10.0,2.0,6.0,12.0,6.0,6.0,6.0,8.0,10.0,6.0,10.0,8.0,10.0,4.0,6.0,8.0,4.0,8.0,6.0,10.0,12.0,12.0,6.0,8.0,6.0,8.0,8.0,4.0,12.0,6.0,4.0,4.0,2.0,4.0,6.0,6.0,2.0,6.0,10.0,4.0,10.0,6.0,6.0,6.0,8.0,2.0,8.0,6.0,8.0,4.0,8.0,10.0,10.0,10.0,4.0,14.0,10.0,4.0,4.0,0.0,6.0,10.0,4.0,6.0,12.0,8.0,6.0,6.0,16.0,2.0,0.0,4.0,8.0,0.0\n' +
                'pr.all.pdc.server02.prpm,1391720430,1391724030,30|12.0,6.0,14.0,2.0,6.0,2.0,4.0,10.0,2.0,6.0,8.0,6.0,0.0,8.0,6.0,6.0,6.0,2.0,2.0,10.0,8.0,2.0,4.0,4.0,8.0,6.0,2.0,6.0,8.0,2.0,12.0,8.0,2.0,10.0,8.0,4.0,2.0,4.0,8.0,10.0,8.0,8.0,4.0,12.0,10.0,6.0,10.0,4.0,8.0,12.0,8.0,6.0,6.0,8.0,8.0,4.0,6.0,2.0,16.0,8.0,6.0,8.0,4.0,8.0,6.0,10.0,4.0,2.0,6.0,4.0,4.0,16.0,4.0,2.0,6.0,4.0,14.0,10.0,4.0,10.0,12.0,4.0,20.0,2.0,12.0,4.0,10.0,6.0,8.0,8.0,8.0,6.0,12.0,2.0,4.0,8.0,2.0,12.0,6.0,2.0,0.0,4.0,12.0,6.0,4.0,12.0,4.0,6.0,12.0,6.0,10.0,6.0,10.0,12.0,4.0,4.0,10.0,10.0,2.0,4.0\n' +
                'pr.all.pdc.server03.prpm,1391720430,1391724030,30|2.0,12.0,6.0,16.0,12.0,10.0,12.0,6.0,6.0,6.0,6.0,2.0,6.0,4.0,8.0,8.0,6.0,10.0,8.0,6.0,4.0,6.0,6.0,6.0,2.0,18.0,4.0,6.0,0.0,8.0,8.0,4.0,2.0,10.0,6.0,16.0,8.0,8.0,10.0,2.0,8.0,6.0,4.0,8.0,4.0,6.0,6.0,6.0,8.0,8.0,12.0,14.0,6.0,4.0,4.0,8.0,6.0,6.0,4.0,6.0,2.0,4.0,8.0,12.0,8.0,12.0,6.0,6.0,2.0,6.0,6.0,10.0,16.0,4.0,2.0,14.0,0.0,6.0,4.0,4.0,0.0,6.0,2.0,4.0,0.0,8.0,4.0,10.0,18.0,2.0,6.0,6.0,4.0,4.0,2.0,10.0,14.0,2.0,12.0,4.0,4.0,10.0,12.0,2.0,8.0,8.0,2.0,6.0,2.0,4.0,6.0,6.0,2.0,4.0,12.0,10.0,2.0,8.0,6.0,6.0\n' +
                'pr.all.pdc.server04.prpm,1391720430,1391724030,30|10.0,4.0,2.0,8.0,8.0,8.0,12.0,10.0,2.0,6.0,0.0,6.0,0.0,18.0,6.0,6.0,2.0,6.0,6.0,4.0,10.0,0.0,10.0,6.0,4.0,4.0,8.0,10.0,6.0,6.0,4.0,12.0,8.0,14.0,6.0,4.0,8.0,6.0,8.0,2.0,4.0,4.0,8.0,6.0,10.0,8.0,12.0,6.0,8.0,6.0,12.0,10.0,8.0,4.0,4.0,2.0,6.0,14.0,0.0,2.0,6.0,6.0,4.0,2.0,2.0,2.0,0.0,14.0,4.0,6.0,8.0,8.0,4.0,4.0,4.0,6.0,14.0,8.0,10.0,6.0,4.0,8.0,0.0,4.0,4.0,8.0,6.0,8.0,10.0,8.0,0.0,4.0,10.0,2.0,6.0,10.0,10.0,12.0,12.0,6.0,12.0,8.0,10.0,6.0,16.0,4.0,4.0,4.0,6.0,8.0,4.0,2.0,16.0,6.0,6.0,4.0,0.0,10.0,2.0,8.0\n',
    multipleLineDatapoints1 = [16.0,10.0,12.0,8.0,4.0,6.0,10.0,4.0,14.0,10.0,2.0,4.0,8.0,2.0,8.0,6.0,8.0,2.0,4.0,6.0,0.0,8.0,2.0,6.0,4.0,8.0,4.0,4.0,6.0,2.0,8.0,6.0,8.0,0.0,10.0,8.0,10.0,2.0,4.0,8.0,8.0,10.0,4.0,12.0,10.0,2.0,10.0,2.0,6.0,12.0,6.0,6.0,6.0,8.0,10.0,6.0,10.0,8.0,10.0,4.0,6.0,8.0,4.0,8.0,6.0,10.0,12.0,12.0,6.0,8.0,6.0,8.0,8.0,4.0,12.0,6.0,4.0,4.0,2.0,4.0,6.0,6.0,2.0,6.0,10.0,4.0,10.0,6.0,6.0,6.0,8.0,2.0,8.0,6.0,8.0,4.0,8.0,10.0,10.0,10.0,4.0,14.0,10.0,4.0,4.0,0.0,6.0,10.0,4.0,6.0,12.0,8.0,6.0,6.0,16.0,2.0,0.0,4.0,8.0,0.0],
    multipleLineDatapoints2 = [12.0,6.0,14.0,2.0,6.0,2.0,4.0,10.0,2.0,6.0,8.0,6.0,0.0,8.0,6.0,6.0,6.0,2.0,2.0,10.0,8.0,2.0,4.0,4.0,8.0,6.0,2.0,6.0,8.0,2.0,12.0,8.0,2.0,10.0,8.0,4.0,2.0,4.0,8.0,10.0,8.0,8.0,4.0,12.0,10.0,6.0,10.0,4.0,8.0,12.0,8.0,6.0,6.0,8.0,8.0,4.0,6.0,2.0,16.0,8.0,6.0,8.0,4.0,8.0,6.0,10.0,4.0,2.0,6.0,4.0,4.0,16.0,4.0,2.0,6.0,4.0,14.0,10.0,4.0,10.0,12.0,4.0,20.0,2.0,12.0,4.0,10.0,6.0,8.0,8.0,8.0,6.0,12.0,2.0,4.0,8.0,2.0,12.0,6.0,2.0,0.0,4.0,12.0,6.0,4.0,12.0,4.0,6.0,12.0,6.0,10.0,6.0,10.0,12.0,4.0,4.0,10.0,10.0,2.0,4.0],
    multipleLineDatapoints3 = [2.0,12.0,6.0,16.0,12.0,10.0,12.0,6.0,6.0,6.0,6.0,2.0,6.0,4.0,8.0,8.0,6.0,10.0,8.0,6.0,4.0,6.0,6.0,6.0,2.0,18.0,4.0,6.0,0.0,8.0,8.0,4.0,2.0,10.0,6.0,16.0,8.0,8.0,10.0,2.0,8.0,6.0,4.0,8.0,4.0,6.0,6.0,6.0,8.0,8.0,12.0,14.0,6.0,4.0,4.0,8.0,6.0,6.0,4.0,6.0,2.0,4.0,8.0,12.0,8.0,12.0,6.0,6.0,2.0,6.0,6.0,10.0,16.0,4.0,2.0,14.0,0.0,6.0,4.0,4.0,0.0,6.0,2.0,4.0,0.0,8.0,4.0,10.0,18.0,2.0,6.0,6.0,4.0,4.0,2.0,10.0,14.0,2.0,12.0,4.0,4.0,10.0,12.0,2.0,8.0,8.0,2.0,6.0,2.0,4.0,6.0,6.0,2.0,4.0,12.0,10.0,2.0,8.0,6.0,6.0],
    multipleLineDatapoints4 = [10.0,4.0,2.0,8.0,8.0,8.0,12.0,10.0,2.0,6.0,0.0,6.0,0.0,18.0,6.0,6.0,2.0,6.0,6.0,4.0,10.0,0.0,10.0,6.0,4.0,4.0,8.0,10.0,6.0,6.0,4.0,12.0,8.0,14.0,6.0,4.0,8.0,6.0,8.0,2.0,4.0,4.0,8.0,6.0,10.0,8.0,12.0,6.0,8.0,6.0,12.0,10.0,8.0,4.0,4.0,2.0,6.0,14.0,0.0,2.0,6.0,6.0,4.0,2.0,2.0,2.0,0.0,14.0,4.0,6.0,8.0,8.0,4.0,4.0,4.0,6.0,14.0,8.0,10.0,6.0,4.0,8.0,0.0,4.0,4.0,8.0,6.0,8.0,10.0,8.0,0.0,4.0,10.0,2.0,6.0,10.0,10.0,12.0,12.0,6.0,12.0,8.0,10.0,6.0,16.0,4.0,4.0,4.0,6.0,8.0,4.0,2.0,16.0,6.0,6.0,4.0,0.0,10.0,2.0,8.0];

  var jsonData = '[{"target": "pr.all.pdc.server01.prpm", "datapoints": [[6.0, 1391720580], [10.0, 1391720610], [4.0, 1391720640], [14.0, 1391720670], [10.0, 1391720700], [2.0, 1391720730], [4.0, 1391720760], [8.0, 1391720790], [2.0, 1391720820], [8.0, 1391720850], [6.0, 1391720880], [8.0, 1391720910], [2.0, 1391720940], [4.0, 1391720970], [6.0, 1391721000], [0.0, 1391721030], [8.0, 1391721060], [2.0, 1391721090], [6.0, 1391721120], [4.0, 1391721150], [8.0, 1391721180], [4.0, 1391721210], [4.0, 1391721240], [6.0, 1391721270], [2.0, 1391721300], [8.0, 1391721330], [6.0, 1391721360], [8.0, 1391721390], [0.0, 1391721420], [10.0, 1391721450], [8.0, 1391721480], [10.0, 1391721510], [2.0, 1391721540], [4.0, 1391721570], [8.0, 1391721600], [8.0, 1391721630], [10.0, 1391721660], [4.0, 1391721690], [12.0, 1391721720], [10.0, 1391721750], [2.0, 1391721780], [10.0, 1391721810], [2.0, 1391721840], [6.0, 1391721870], [12.0, 1391721900], [6.0, 1391721930], [6.0, 1391721960], [6.0, 1391721990], [8.0, 1391722020], [10.0, 1391722050], [6.0, 1391722080], [10.0, 1391722110], [8.0, 1391722140], [10.0, 1391722170], [4.0, 1391722200], [6.0, 1391722230], [8.0, 1391722260], [4.0, 1391722290], [8.0, 1391722320], [6.0, 1391722350], [10.0, 1391722380], [12.0, 1391722410], [12.0, 1391722440], [6.0, 1391722470], [8.0, 1391722500], [6.0, 1391722530], [8.0, 1391722560], [8.0, 1391722590], [4.0, 1391722620], [12.0, 1391722650], [6.0, 1391722680], [4.0, 1391722710], [4.0, 1391722740], [2.0, 1391722770], [4.0, 1391722800], [6.0, 1391722830], [6.0, 1391722860], [2.0, 1391722890], [6.0, 1391722920], [10.0, 1391722950], [4.0, 1391722980], [10.0, 1391723010], [6.0, 1391723040], [6.0, 1391723070], [6.0, 1391723100], [8.0, 1391723130], [2.0, 1391723160], [8.0, 1391723190], [6.0, 1391723220], [8.0, 1391723250], [4.0, 1391723280], [8.0, 1391723310], [10.0, 1391723340], [10.0, 1391723370], [10.0, 1391723400], [4.0, 1391723430], [14.0, 1391723460], [10.0, 1391723490], [4.0, 1391723520], [4.0, 1391723550], [0.0, 1391723580], [6.0, 1391723610], [10.0, 1391723640], [4.0, 1391723670], [6.0, 1391723700], [12.0, 1391723730], [8.0, 1391723760], [6.0, 1391723790], [6.0, 1391723820], [16.0, 1391723850], [2.0, 1391723880], [0.0, 1391723910], [4.0, 1391723940], [8.0, 1391723970], [0.0, 1391724000], [8.0, 1391724030], [0.0, 1391724060], [4.0, 1391724090], [2.0, 1391724120], [10.0, 1391724150]]}, {"target": "pr.all.pdc.server02.prpm", "datapoints": [[2.0, 1391720580], [4.0, 1391720610], [10.0, 1391720640], [2.0, 1391720670], [6.0, 1391720700], [8.0, 1391720730], [6.0, 1391720760], [0.0, 1391720790], [8.0, 1391720820], [6.0, 1391720850], [6.0, 1391720880], [6.0, 1391720910], [2.0, 1391720940], [2.0, 1391720970], [10.0, 1391721000], [8.0, 1391721030], [2.0, 1391721060], [4.0, 1391721090], [4.0, 1391721120], [8.0, 1391721150], [6.0, 1391721180], [2.0, 1391721210], [6.0, 1391721240], [8.0, 1391721270], [2.0, 1391721300], [12.0, 1391721330], [8.0, 1391721360], [2.0, 1391721390], [10.0, 1391721420], [8.0, 1391721450], [4.0, 1391721480], [2.0, 1391721510], [4.0, 1391721540], [8.0, 1391721570], [10.0, 1391721600], [8.0, 1391721630], [8.0, 1391721660], [4.0, 1391721690], [12.0, 1391721720], [10.0, 1391721750], [6.0, 1391721780], [10.0, 1391721810], [4.0, 1391721840], [8.0, 1391721870], [12.0, 1391721900], [8.0, 1391721930], [6.0, 1391721960], [6.0, 1391721990], [8.0, 1391722020], [8.0, 1391722050], [4.0, 1391722080], [6.0, 1391722110], [2.0, 1391722140], [16.0, 1391722170], [8.0, 1391722200], [6.0, 1391722230], [8.0, 1391722260], [4.0, 1391722290], [8.0, 1391722320], [6.0, 1391722350], [10.0, 1391722380], [4.0, 1391722410], [2.0, 1391722440], [6.0, 1391722470], [4.0, 1391722500], [4.0, 1391722530], [16.0, 1391722560], [4.0, 1391722590], [2.0, 1391722620], [6.0, 1391722650], [4.0, 1391722680], [14.0, 1391722710], [10.0, 1391722740], [4.0, 1391722770], [10.0, 1391722800], [12.0, 1391722830], [4.0, 1391722860], [20.0, 1391722890], [2.0, 1391722920], [12.0, 1391722950], [4.0, 1391722980], [10.0, 1391723010], [6.0, 1391723040], [8.0, 1391723070], [8.0, 1391723100], [8.0, 1391723130], [6.0, 1391723160], [12.0, 1391723190], [2.0, 1391723220], [4.0, 1391723250], [8.0, 1391723280], [2.0, 1391723310], [12.0, 1391723340], [6.0, 1391723370], [2.0, 1391723400], [0.0, 1391723430], [4.0, 1391723460], [12.0, 1391723490], [6.0, 1391723520], [4.0, 1391723550], [12.0, 1391723580], [4.0, 1391723610], [6.0, 1391723640], [12.0, 1391723670], [6.0, 1391723700], [10.0, 1391723730], [6.0, 1391723760], [10.0, 1391723790], [12.0, 1391723820], [4.0, 1391723850], [4.0, 1391723880], [10.0, 1391723910], [10.0, 1391723940], [2.0, 1391723970], [4.0, 1391724000], [8.0, 1391724030], [12.0, 1391724060], [6.0, 1391724090], [8.0, 1391724120], [18.0, 1391724150]]}, {"target": "pr.all.pdc.server03.prpm", "datapoints": [[10.0, 1391720580], [12.0, 1391720610], [6.0, 1391720640], [6.0, 1391720670], [6.0, 1391720700], [6.0, 1391720730], [2.0, 1391720760], [6.0, 1391720790], [4.0, 1391720820], [8.0, 1391720850], [8.0, 1391720880], [6.0, 1391720910], [10.0, 1391720940], [8.0, 1391720970], [6.0, 1391721000], [4.0, 1391721030], [6.0, 1391721060], [6.0, 1391721090], [6.0, 1391721120], [2.0, 1391721150], [18.0, 1391721180], [4.0, 1391721210], [6.0, 1391721240], [0.0, 1391721270], [8.0, 1391721300], [8.0, 1391721330], [4.0, 1391721360], [2.0, 1391721390], [10.0, 1391721420], [6.0, 1391721450], [16.0, 1391721480], [8.0, 1391721510], [8.0, 1391721540], [10.0, 1391721570], [2.0, 1391721600], [8.0, 1391721630], [6.0, 1391721660], [4.0, 1391721690], [8.0, 1391721720], [4.0, 1391721750], [6.0, 1391721780], [6.0, 1391721810], [6.0, 1391721840], [8.0, 1391721870], [8.0, 1391721900], [12.0, 1391721930], [14.0, 1391721960], [6.0, 1391721990], [4.0, 1391722020], [4.0, 1391722050], [8.0, 1391722080], [6.0, 1391722110], [6.0, 1391722140], [4.0, 1391722170], [6.0, 1391722200], [2.0, 1391722230], [4.0, 1391722260], [8.0, 1391722290], [12.0, 1391722320], [8.0, 1391722350], [12.0, 1391722380], [6.0, 1391722410], [6.0, 1391722440], [2.0, 1391722470], [6.0, 1391722500], [6.0, 1391722530], [10.0, 1391722560], [16.0, 1391722590], [4.0, 1391722620], [2.0, 1391722650], [14.0, 1391722680], [0.0, 1391722710], [6.0, 1391722740], [4.0, 1391722770], [4.0, 1391722800], [0.0, 1391722830], [6.0, 1391722860], [2.0, 1391722890], [4.0, 1391722920], [0.0, 1391722950], [8.0, 1391722980], [4.0, 1391723010], [10.0, 1391723040], [18.0, 1391723070], [2.0, 1391723100], [6.0, 1391723130], [6.0, 1391723160], [4.0, 1391723190], [4.0, 1391723220], [2.0, 1391723250], [10.0, 1391723280], [14.0, 1391723310], [2.0, 1391723340], [12.0, 1391723370], [4.0, 1391723400], [4.0, 1391723430], [10.0, 1391723460], [12.0, 1391723490], [2.0, 1391723520], [8.0, 1391723550], [8.0, 1391723580], [2.0, 1391723610], [6.0, 1391723640], [2.0, 1391723670], [4.0, 1391723700], [6.0, 1391723730], [6.0, 1391723760], [2.0, 1391723790], [4.0, 1391723820], [12.0, 1391723850], [10.0, 1391723880], [2.0, 1391723910], [8.0, 1391723940], [6.0, 1391723970], [6.0, 1391724000], [6.0, 1391724030], [4.0, 1391724060], [6.0, 1391724090], [6.0, 1391724120], [2.0, 1391724150]]}, {"target": "pr.all.pdc.server04.prpm", "datapoints": [[8.0, 1391720580], [12.0, 1391720610], [10.0, 1391720640], [2.0, 1391720670], [6.0, 1391720700], [0.0, 1391720730], [6.0, 1391720760], [0.0, 1391720790], [18.0, 1391720820], [6.0, 1391720850], [6.0, 1391720880], [2.0, 1391720910], [6.0, 1391720940], [6.0, 1391720970], [4.0, 1391721000], [10.0, 1391721030], [0.0, 1391721060], [10.0, 1391721090], [6.0, 1391721120], [4.0, 1391721150], [4.0, 1391721180], [8.0, 1391721210], [10.0, 1391721240], [6.0, 1391721270], [6.0, 1391721300], [4.0, 1391721330], [12.0, 1391721360], [8.0, 1391721390], [14.0, 1391721420], [6.0, 1391721450], [4.0, 1391721480], [8.0, 1391721510], [6.0, 1391721540], [8.0, 1391721570], [2.0, 1391721600], [4.0, 1391721630], [4.0, 1391721660], [8.0, 1391721690], [6.0, 1391721720], [10.0, 1391721750], [8.0, 1391721780], [12.0, 1391721810], [6.0, 1391721840], [8.0, 1391721870], [6.0, 1391721900], [12.0, 1391721930], [10.0, 1391721960], [8.0, 1391721990], [4.0, 1391722020], [4.0, 1391722050], [2.0, 1391722080], [6.0, 1391722110], [14.0, 1391722140], [0.0, 1391722170], [2.0, 1391722200], [6.0, 1391722230], [6.0, 1391722260], [4.0, 1391722290], [2.0, 1391722320], [2.0, 1391722350], [2.0, 1391722380], [0.0, 1391722410], [14.0, 1391722440], [4.0, 1391722470], [6.0, 1391722500], [8.0, 1391722530], [8.0, 1391722560], [4.0, 1391722590], [4.0, 1391722620], [4.0, 1391722650], [6.0, 1391722680], [14.0, 1391722710], [8.0, 1391722740], [10.0, 1391722770], [6.0, 1391722800], [4.0, 1391722830], [8.0, 1391722860], [0.0, 1391722890], [4.0, 1391722920], [4.0, 1391722950], [8.0, 1391722980], [6.0, 1391723010], [8.0, 1391723040], [10.0, 1391723070], [8.0, 1391723100], [0.0, 1391723130], [4.0, 1391723160], [10.0, 1391723190], [2.0, 1391723220], [6.0, 1391723250], [10.0, 1391723280], [10.0, 1391723310], [12.0, 1391723340], [12.0, 1391723370], [6.0, 1391723400], [12.0, 1391723430], [8.0, 1391723460], [10.0, 1391723490], [6.0, 1391723520], [16.0, 1391723550], [4.0, 1391723580], [4.0, 1391723610], [4.0, 1391723640], [6.0, 1391723670], [8.0, 1391723700], [4.0, 1391723730], [2.0, 1391723760], [16.0, 1391723790], [6.0, 1391723820], [6.0, 1391723850], [4.0, 1391723880], [0.0, 1391723910], [10.0, 1391723940], [2.0, 1391723970], [8.0, 1391724000], [8.0, 1391724030], [6.0, 1391724060], [6.0, 1391724090], [2.0, 1391724120], [2.0, 1391724150]]}]'

  var graphiteDataParser;

  beforeEach(module('ngGraphite.factories'));

  beforeEach(inject(function(GraphiteDataParser){
    graphiteDataParser = GraphiteDataParser;
  }));

  it('should transform single raw data line into json', function(){

    var result = graphiteDataParser.rawToJson(rawDataSingleLine);
    expect(result).toBeDefined();
    expect(Array.isArray(result)).toBe(true);
    expect(result.length).toEqual(1);
    expect(result[0].target).toBeDefined();
    expect(result[0].target).toEqual('pr.all.pdc.server01.prpm');
    expect(result[0].datapoints).toBeDefined();
    expect(Array.isArray(result[0].datapoints)).toBe(true);
    expect(result[0].datapoints.length).toEqual(singleLineDatapoints.length);

    for(var i = 0; i < singleLineDatapoints.length; i++){
      expect((+result[0].datapoints[i][0])).toEqual(+singleLineDatapoints[i]);
    }

    var startTime = 1391720430, step = 30;
    for(var i = 0; i < singleLineDatapoints.length; i++){
      expect((+result[0].datapoints[i][1])).toEqual(startTime);
      startTime = startTime + step;
    }

  });

  it('should transform multiple raw data lines into json', function(){

    var result = graphiteDataParser.rawToJson(rawDataMultipleLine);
    expect(result).toBeDefined();
    expect(Array.isArray(result)).toBe(true);
    expect(result.length).toEqual(4);

    expect(result[0].target).toBeDefined();
    expect(result[1].target).toBeDefined();
    expect(result[2].target).toBeDefined();
    expect(result[3].target).toBeDefined();

    expect(result[0].target).toEqual('pr.all.pdc.server01.prpm');
    expect(result[1].target).toEqual('pr.all.pdc.server02.prpm');
    expect(result[2].target).toEqual('pr.all.pdc.server03.prpm');
    expect(result[3].target).toEqual('pr.all.pdc.server04.prpm');

    for(var i = 0; i < multipleLineDatapoints1.length; i++){
      expect((+result[0].datapoints[i][0])).toEqual(+multipleLineDatapoints1[i]);
    }

    var startTime = 1391720430, step = 30;
    for(var i = 0; i < multipleLineDatapoints1.length; i++){
      expect((+result[0].datapoints[i][1])).toEqual(startTime);
      startTime = startTime + step;
    }

    for(var i = 0; i < multipleLineDatapoints2.length; i++){
      expect((+result[1].datapoints[i][0])).toEqual(+multipleLineDatapoints2[i]);
    }

    startTime = 1391720430;
    for(var i = 0; i < multipleLineDatapoints2.length; i++){
      expect((+result[1].datapoints[i][1])).toEqual(startTime);
      startTime = startTime + step;
    }

    for(var i = 0; i < multipleLineDatapoints3.length; i++){
      expect((+result[2].datapoints[i][0])).toEqual(+multipleLineDatapoints3[i]);
    }

    startTime = 1391720430;
    for(var i = 0; i < multipleLineDatapoints3.length; i++){
      expect((+result[2].datapoints[i][1])).toEqual(startTime);
      startTime = startTime + step;
    }

    for(var i = 0; i < multipleLineDatapoints4.length; i++){
      expect((+result[3].datapoints[i][0])).toEqual(+multipleLineDatapoints4[i]);
    }

    startTime = 1391720430;
    for(var i = 0; i < multipleLineDatapoints4.length; i++){
      expect((+result[3].datapoints[i][1])).toEqual(startTime);
      startTime = startTime + step;
    }

  });

  it('should transform raw data into json', function(){

    var result = graphiteDataParser.jsonToRaw(jsonData);
    expect(result).toBeDefined();

  });


});